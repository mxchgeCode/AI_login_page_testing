# README

## Описание проекта

Этот проект реализует автоматическую генерацию и выполнение Unit-тестов для Python-кода с использованием Playwright и pytest. Основная задача — по изменению (`push`) исходного кода в файле `app.py` автоматически создавать тесты, сохранять их и запускать в CI/CD пайплайне (в GitHub Actions).

***

## Как работает код

1. **Тест в `app.py`**  
   В проекте есть пример теста `test_login()`, который использует библиотеку Playwright для автоматизации браузера и проверяет форму логина на сайте [Practice Test Automation](https://practicetestautomation.com/practice-test-login/). Тест заполняет поля "username" и "password", кликает по кнопке "Submit" и проверяет URL для подтверждения успешного входа.

2. **Генератор тестов `generate_tests.py`**  
   Скрипт читает исходный код из `app.py` и отправляет его в нейросетевой API (такая как OpenRouter или любой другой LLM), который на основе кода генерирует Python-тесты с использованием pytest.  
   - Скрипт очищает полученный ответ от служебных маркеров кода.  
   - Добавляет в начало сгенерированного файла правильный импорт функций из `app.py`, чтобы избежать ошибок при запуске тестов.  
   - Сохраняет тесты в файл `test_generated.py`.

3. **CI/CD интеграция**  
   При пуше в репозиторий запускается GitHub Actions workflow, который:  
   - Клонирует репозиторий.  
   - Устанавливает зависимости (Playwright, pytest, requests).  
   - Запускает генерацию тестов с помощью `generate_tests.py`.  
   - Запускает тесты с помощью pytest.  
   - Выводит результаты тестирования.

***

## Особенности

- Тесты адаптированы под работу с практическим тестовым сайтом для логина, используя реальные селекторы и взаимодействия.  
- В генераторе применяется нейросетевой API, что упрощает создание качественных тестов без ручного написания.  
- В коде предусмотрена обработка ошибок в работе с браузером и корректное закрытие ресурсов.  
- Скрипт генерирует чистый Python-код, готовый к исполнению в pytest.

***

## Требования

- Python 3.11+  
- Установленные библиотеки: `playwright`, `pytest`, `requests`  
- API ключ для нейросетевого сервиса (OpenRouter) и настройка переменной окружения `OPENROUTER_API_KEY`  
- GitHub Actions (или другой CI/CD) для автоматического запуска

***

## Запуск локально

```bash
python generate_tests.py  # сгенерировать тесты из app.py
pytest test_generated.py  # прогон сгенерированных тестов
```

***

## Полезные ссылки

- [Playwright for Python](https://playwright.dev/python/)  
- [pytest](https://docs.pytest.org/en/stable/)  
- [OpenRouter API](https://openrouter.ai/) или другой LLM API  
- [Practice Test Automation Login Demo](https://practicetestautomation.com/practice-test-login/)

***

Этот проект демонстрирует полный цикл автоматизации — от кода до анализа тестов с помощью современных AI-инструментов и browser automation.